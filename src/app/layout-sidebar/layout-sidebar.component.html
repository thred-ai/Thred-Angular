<div class="h-100 w-100 pb-2">
  <div
    class="h-100 w-100 d-flex justify-content-between align-content-center flex-column"
    id="label"
  >
    <div
      class="wrap-input1 w-100 p-3 border-bottom py-auto d-flex justify-content-{{
        activeBlock ? 'between' : 'end'
      }} align-content-center"
    >
      <div
        class="shadow-0 border-0 p-0 fw-bold my-auto text-purple d-inline-flex justify-content-between align-content-center"
        role="button"
        *ngIf="activeBlock"
        (click)="finishedEditing(3)"
      >
        <mat-icon class="me-0" style="aspect-ratio: 1">
          arrow_back_ios
        </mat-icon>
        Back
      </div>

      <div
        class="shadow-0 border-0 p-0 fw-bold my-auto text-secondary d-inline-flex justify-content-between align-content-center"
        role="button"
        (click)="closeBar.emit()"
      >
        <mat-icon class="me-0" style="aspect-ratio: 1"> close </mat-icon>
      </div>
    </div>
    <div *ngIf="!activeBlock" class="w-100 h-100" style="overflow-y: scroll">
      <mat-accordion class="example-headers-align" multi>
        <mat-expansion-panel class="shadow-0 border-bottom" [expanded]="true">
          <mat-expansion-panel-header>
            <mat-panel-title class="fw-bold text-dark">
              General
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Name</p>

            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 pb-2 px-4 mb-4">
                <mat-form-field
                  class="w-100 text"
                  appearance="legacy"
                  floatLabel="never"
                >
                  <input
                    matInput
                    class="bg-transparent text-truncate"
                    type="text"
                    name="name"
                    [ngModel]="page.title"
                    (ngModelChange)="page.title = $event; saveLayout(0)"
                    placeholder="Name"
                  />
                </mat-form-field>
              </div>
            </div>
          </div>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Style</p>
            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 pe-4 mb-3">
                <mat-form-field
                  class="w-100 text"
                  appearance="legacy"
                  floatLabel="never"
                >
                  <mat-select
                    [ngModel]="page.position"
                    (ngModelChange)="page.position = $event; saveLayout(0)"
                    class="my-auto d-flex justify-content-start align-items-center"
                  >
                    <mat-select-trigger
                      class="text-dark h-100 m-auto"
                      *ngIf="matchingTabType(page.position ?? 0)"
                    >
                      <div
                        class="w-100 d-flex justify-content-start align-items-center p-3 my-auto"
                      >
                        <div style="height: 40px"></div>
                        <div class="text-start text-truncate w-50 ms-2">
                          {{ matchingTabType(page.position)!.name }}
                        </div>
                      </div>
                    </mat-select-trigger>

                    <mat-option
                      *ngFor="let type of tabPosTypes ?? []"
                      [value]="type.code"
                    >
                      <div
                        class="h-100 w-100 d-flex justify-content-start justify-content-md-between align-items-center py-3"
                      >
                        <div
                          class="d-flex justify-content-start align-items-center"
                        >
                          <span class="py-1" style="font-size: medium">
                            {{ type?.name ?? "Choose a block type" }}
                          </span>
                        </div>
                      </div>
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </div>

          <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
            <i><span style="font-size: small">General</span></i>
          </div>
        </mat-expansion-panel>

        <ng-container *ngIf="page.type == 1">
          <mat-expansion-panel
            class="shadow-0 border-bottom"
            *ngIf="page | cast: AuthPage as authPage"
            [expanded]="true"
          >
            <mat-expansion-panel-header>
              <mat-panel-title class="fw-bold text-dark">
                Branding
              </mat-panel-title>
            </mat-expansion-panel-header>

            <div class="wrap-input1 w-100 pt-3">
              <p class="w-100 mb-4 text">Title</p>

              <div class="px-3 w-100">
                <div class="rounded-pill border w-100 pb-2 px-4 mb-4">
                  <mat-form-field
                    class="w-100 text"
                    appearance="legacy"
                    floatLabel="never"
                  >
                    <input
                      matInput
                      class="bg-transparent text-truncate"
                      type="text"
                      name="name"
                      [ngModel]="authPage?.text"
                      (ngModelChange)="
                        authPage['text'] = $event;
                        page = authPage;
                        saveLayout(0)
                      "
                      placeholder="Name"
                    />
                  </mat-form-field>
                </div>
              </div>
            </div>

            <div class="wrap-input1 w-100 pt-3">
              <p class="w-100 mb-4 text">Display Image</p>
              <div
                class="px-3 w-100 mb-3"
                *ngIf="authPage.img ? [authPage.img] : [] as media"
              >
                <app-media-table
                  #mediaTable2
                  [id]="walletId"
                  [media]="media"
                  [max]="1"
                  [count]="media.length"
                  (dataChanged)="setAuthPageImgData($event); saveLayout(0)"
                >
                </app-media-table>
              </div>
            </div>

            <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
              <i><span style="font-size: small">Branding</span></i>
            </div>
          </mat-expansion-panel>
        </ng-container>

        <ng-container *ngIf="page.type == 2">
          <mat-expansion-panel
            class="shadow-0 border-bottom"
            [expanded]="true"
            *ngIf="page | cast: AccountPage as accountPage"
          >
            <mat-expansion-panel-header>
              <mat-panel-title class="fw-bold text-dark">
                Social Elements
              </mat-panel-title>
            </mat-expansion-panel-header>

            <div class="wrap-input1 w-100 pt-3">
              <div class="px-3 w-100 py-2">
                <mat-checkbox
                  class="example-margin"
                  [ngModel]="accountPage?.displayName"
                  (ngModelChange)="
                    accountPage['displayName'] = $event;
                    page = accountPage;
                    saveLayout(0)
                  "
                  >Display Name</mat-checkbox
                >
              </div>
              <div class="px-3 w-100 py-2">
                <mat-checkbox
                  class="example-margin"
                  [ngModel]="accountPage?.displayPic"
                  (ngModelChange)="
                    accountPage['displayPic'] = $event;
                    page = accountPage;
                    saveLayout(0)
                  "
                  >Profile Picture</mat-checkbox
                >
              </div>
              <div class="px-3 w-100 py-2">
                <mat-checkbox
                  class="example-margin"
                  [ngModel]="accountPage?.bio"
                  (ngModelChange)="
                    accountPage['bio'] = $event;
                    page = accountPage;
                    saveLayout(0)
                  "
                  >User Bio</mat-checkbox
                >
              </div>
            </div>

            <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
              <i><span style="font-size: small">Social Elements</span></i>
            </div>
          </mat-expansion-panel>
        </ng-container>
        <mat-expansion-panel
          class="shadow-0 border-bottom"
          disabled
          [expanded]="true"
          *ngIf="page.type == 0 || page.type == 2"
        >
          <mat-expansion-panel-header>
            <mat-panel-title class="fw-bold text-dark"> Body </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="wrap-input1 w-100 pt-3 px-0 mb-3">
            <div
              class="w-100"
              cdkDropList
              [cdkDropListData]="page.blocks"
              (cdkDropListDropped)="droppedPage.emit({$event, pageIndex})"
            >
              <div *ngFor="let b of page.blocks ?? []; index as i" cdkDrag>
                <app-edit-block
                  [id]="'p-' + i"
                  [block]="b"
                  [active]="false"
                  [defaultItems]="
                    defaultItems ? defaultItems[b.type] : undefined
                  "
                  [page]="page"
                  (clicked)="edit.emit({ blockIndex: i, pageIndex })"
                  (hoverOn)="changeStyle($event, i)"
                  (hoverOff)="changeStyle($event, i)"
                >
                </app-edit-block>
              </div>
            </div>

            <div
              class="w-100 d-flex justify-content-between align-items-center"
            >
              <div class="mt-1 px-3 w-100">
                <div
                  class="card rounded-15 zoom container-fluid d-flex justify-content-center align-items-center big-design-placeholder mt-1"
                  role="button"
                  (click)="addBlock(pageIndex)"
                  matTooltip="Add New Content Block"
                >
                  <a
                    class="fw-bolder text-purple d-flex align-items-center justify-content-center"
                    style="font-size: large; text-decoration: none"
                  >
                    ADD BLOCK
                    <mat-icon
                      class="ms-1"
                      style="font-weight: bolder"
                      [inline]="true"
                      >add</mat-icon
                    >
                  </a>
                </div>
              </div>
            </div>
          </div>

          <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
            <i><span style="font-size: small">Body</span></i>
          </div>
        </mat-expansion-panel>

        <mat-expansion-panel class="shadow-0 border-bottom" [expanded]="false">
          <mat-expansion-panel-header>
            <mat-panel-title class="fw-bold text-dark">
              Page Colours
            </mat-panel-title>
          </mat-expansion-panel-header>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Background Color</p>
            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 px-2 mb-3">
                <a
                  role="button"
                  class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                  [cpPosition]="'top'"
                  [cpPositionRelativeToArrow]="false"
                  (colorPickerSelect)="
                    page!.backgroundColor = $event;
                    
                    saveLayout(0)
                  "
                  [cpOutputFormat]="'hex'"
                  [cpOKButton]="true"
                  [cpOKButtonText]="'SET COLOR'"
                  [cpOKButtonClass]="'big-design-alt-button'"
                  [cpSaveClickOutside]="false"
                  [colorPicker]="page.backgroundColor"
                  style="height: 40px"
                >
                  <p
                    class="big-design-input-text my-auto p-0"
                    style="font-size: 14px"
                  >
                    {{ page.backgroundColor }}
                  </p>
                  <div
                    class="rounded-circle border border-secondary"
                    style="height: 20px; aspect-ratio: 1"
                    [style.background-color]="page.backgroundColor"
                  ></div>
                </a>
              </div>
            </div>
          </div>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Detail Color</p>
            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 px-2 mb-3">
                <a
                  role="button"
                  class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                  [cpPosition]="'top'"
                  [cpPositionRelativeToArrow]="false"
                  (colorPickerSelect)="
                    page!.detailColor = $event;
                    syncBlockAndPageColors(pageIndex, $event);
                    saveLayout(0)
                  "
                  [cpOutputFormat]="'hex'"
                  [cpOKButton]="true"
                  [cpOKButtonText]="'SET COLOR'"
                  [cpOKButtonClass]="'big-design-alt-button'"
                  [cpSaveClickOutside]="false"
                  [colorPicker]="page.detailColor"
                  style="height: 40px"
                >
                  <p
                    class="big-design-input-text my-auto p-0"
                    style="font-size: 14px"
                  >
                    {{ page.detailColor }}
                  </p>
                  <div
                    class="rounded-circle border border-secondary"
                    style="height: 20px; aspect-ratio: 1"
                    [style.background-color]="page.detailColor"
                  ></div>
                </a>
              </div>
            </div>
          </div>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Text Color</p>
            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 px-2 mb-3">
                <a
                  role="button"
                  class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                  [cpPosition]="'top'"
                  [cpPositionRelativeToArrow]="false"
                  (colorPickerSelect)="
                    page!.textColor = $event;
                    syncBlockAndPageColors(pageIndex, $event);
                    saveLayout(0)
                  "
                  [cpOutputFormat]="'hex'"
                  [cpOKButton]="true"
                  [cpOKButtonText]="'SET COLOR'"
                  [cpOKButtonClass]="'big-design-alt-button'"
                  [cpSaveClickOutside]="false"
                  [colorPicker]="page.textColor"
                  style="height: 40px"
                >
                  <p
                    class="big-design-input-text my-auto p-0"
                    style="font-size: 14px"
                  >
                    {{ page.textColor }}
                  </p>
                  <div
                    class="rounded-circle border border-secondary"
                    style="height: 20px; aspect-ratio: 1"
                    [style.background-color]="page.textColor"
                  ></div>
                </a>
              </div>
            </div>
          </div>

          <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
            <i><span style="font-size: small">Page Colours</span></i>
          </div>
        </mat-expansion-panel>

        <mat-expansion-panel class="shadow-0 border-bottom">
          <mat-expansion-panel-header>
            <mat-panel-title class="fw-bold text-dark">
              Navigation Bar
            </mat-panel-title>
          </mat-expansion-panel-header>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Availability</p>
            <mat-slide-toggle
              class="mb-3"
              [ngModel]="page.bar.visible"
              (ngModelChange)="page.bar.visible = $event; saveLayout(0)"
            >
              {{ page.bar.visible ? "Visible" : "Hidden" }}
            </mat-slide-toggle>
          </div>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Content Type</p>
            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 pe-4 mb-3">
                <mat-form-field
                  class="w-100 text"
                  appearance="legacy"
                  floatLabel="never"
                >
                  <mat-select
                    [ngModel]="page.bar.mode"
                    (ngModelChange)="page.bar.mode = $event; saveLayout(0)"
                    class="my-auto d-flex justify-content-start align-items-center"
                  >
                    <mat-select-trigger
                      class="text-dark h-100 m-auto"
                      *ngIf="matchingBarType(page.bar.mode ?? 0)"
                    >
                      <div
                        class="w-100 d-flex justify-content-start align-items-center p-3 my-auto"
                      >
                        <div style="height: 40px"></div>
                        <div class="text-start text-truncate w-50 ms-2">
                          {{ matchingBarType(page.bar.mode)!.name }}
                        </div>
                      </div>
                    </mat-select-trigger>

                    <mat-option
                      *ngFor="let type of navBarTypes ?? []"
                      [value]="type.code"
                    >
                      <div
                        class="h-100 w-100 d-flex justify-content-start justify-content-md-between align-items-center py-3"
                      >
                        <div
                          class="d-flex justify-content-start align-items-center"
                        >
                          <span class="py-1" style="font-size: medium">
                            {{ type?.name ?? "Choose a content type" }}
                          </span>
                        </div>
                      </div>
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </div>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Bar Color</p>
            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 px-2 mb-3">
                <a
                  role="button"
                  class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                  [cpPosition]="'top'"
                  [cpPositionRelativeToArrow]="false"
                  (colorPickerSelect)="
                    page.bar.backgroundColor = $event; saveLayout(0)
                  "
                  [cpOKButton]="true"
                  [cpOKButtonText]="'SET COLOR'"
                  [cpOKButtonClass]="'big-design-alt-button'"
                  [cpSaveClickOutside]="false"
                  [colorPicker]="page.bar.backgroundColor"
                  style="height: 40px"
                >
                  <p
                    class="big-design-input-text my-auto p-0"
                    style="font-size: 14px"
                  >
                    {{ page.bar.backgroundColor }}
                  </p>
                  <div
                    class="rounded-circle border border-secondary"
                    style="height: 20px; aspect-ratio: 1"
                    [style.background-color]="page.bar.backgroundColor"
                  ></div>
                </a>
              </div>
            </div>
          </div>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Bar Text Color</p>
            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 px-2 mb-3">
                <a
                  role="button"
                  class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                  [cpPosition]="'top'"
                  [cpPositionRelativeToArrow]="false"
                  (colorPickerSelect)="
                    page.bar.textColor = $event; saveLayout(0)
                  "
                  [cpOutputFormat]="'hex'"
                  [cpOKButton]="true"
                  [cpOKButtonText]="'SET COLOR'"
                  [cpOKButtonClass]="'big-design-alt-button'"
                  [cpSaveClickOutside]="false"
                  [colorPicker]="page.bar.textColor"
                  style="height: 40px"
                >
                  <p
                    class="big-design-input-text my-auto p-0"
                    style="font-size: 14px"
                  >
                    {{ page.bar.textColor }}
                  </p>
                  <div
                    class="rounded-circle border border-secondary"
                    style="height: 20px; aspect-ratio: 1"
                    [style.background-color]="page.bar.textColor"
                  ></div>
                </a>
              </div>
            </div>
          </div>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Bar Detail Color</p>
            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 px-2 mb-3">
                <a
                  role="button"
                  class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                  [cpPosition]="'top'"
                  [cpPositionRelativeToArrow]="false"
                  (colorPickerSelect)="
                    page.bar.detailColor = $event; saveLayout(0)
                  "
                  [cpOutputFormat]="'hex'"
                  [cpOKButton]="true"
                  [cpOKButtonText]="'SET COLOR'"
                  [cpOKButtonClass]="'big-design-alt-button'"
                  [cpSaveClickOutside]="false"
                  [colorPicker]="page.bar.detailColor"
                  style="height: 40px"
                >
                  <p
                    class="big-design-input-text my-auto p-0"
                    style="font-size: 14px"
                  >
                    {{ page.bar.detailColor }}
                  </p>
                  <div
                    class="rounded-circle border border-secondary"
                    style="height: 20px; aspect-ratio: 1"
                    [style.background-color]="page.bar.detailColor"
                  ></div>
                </a>
              </div>
            </div>
          </div>

          <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
            <i><span style="font-size: small">Navigation Bar</span></i>
          </div>
        </mat-expansion-panel>

        <mat-expansion-panel
          class="shadow-0 border-bottom"
          *ngIf="page.type == 0 || page.type == 2"
        >
          <mat-expansion-panel-header>
            <mat-panel-title class="fw-bold text-dark">
              Tab Bar
            </mat-panel-title>
          </mat-expansion-panel-header>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Tab Icon</p>

            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 py-0 px-3 ps-4 mb-4">
                <mat-form-field
                  class="w-100 text h-100 py-0"
                  appearance="legacy"
                  floatLabel="never"
                >
                  <input
                    type="text"
                    placeholder="Tab Icon"
                    class="bg-transparent text-truncate mb-2"
                    matInput
                    [ngModel]="page.icon"
                    (ngModelChange)="page.icon = $event"
                    (ngModelChange)="filterCodes($event)"
                    [matAutocomplete]="auto"
                  />

                  <mat-autocomplete
                    #auto="matAutocomplete"
                    [displayWith]="formattedName.bind(this)"
                  >
                    <cdk-virtual-scroll-viewport
                      class="autocomplete-test-viewport"
                      [ngStyle]="{ height: height }"
                      itemSize="35"
                    >
                      <mat-optgroup
                        style="display: block"
                        *cdkVirtualFor="let iconGroup of filteredIcons | async"
                        [label]="iconGroup.category | uppercase"
                      >
                        <mat-option
                          class="not-empty-select autocomplete-item"
                          *ngFor="let icon of iconGroup.icons"
                          [value]="icon"
                          (click)="selectIcon(icon, page)"
                        >
                          <mat-icon class="me-2 my-auto">{{ icon }}</mat-icon>
                          {{ formattedName(icon) | titlecase }}
                        </mat-option>
                      </mat-optgroup>
                    </cdk-virtual-scroll-viewport>
                  </mat-autocomplete>

                  <div matSuffix>
                    <mat-icon class="pb-2 me-1">search</mat-icon>
                  </div>
                </mat-form-field>
              </div>
            </div>
          </div>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Bar Color</p>
            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 px-2 mb-3">
                <a
                  role="button"
                  class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                  [cpPosition]="'top'"
                  [cpPositionRelativeToArrow]="false"
                  (colorPickerSelect)="
                    page.tab.backgroundColor = $event; saveLayout(0)
                  "
                  [cpOutputFormat]="'hex'"
                  [cpOKButton]="true"
                  [cpOKButtonText]="'SET COLOR'"
                  [cpOKButtonClass]="'big-design-alt-button'"
                  [cpSaveClickOutside]="false"
                  [colorPicker]="page.tab.backgroundColor"
                  style="height: 40px"
                >
                  <p
                    class="big-design-input-text my-auto p-0"
                    style="font-size: 14px"
                  >
                    {{ page.tab.backgroundColor }}
                  </p>
                  <div
                    class="rounded-circle border border-secondary"
                    style="height: 20px; aspect-ratio: 1"
                    [style.background-color]="page.tab.backgroundColor"
                  ></div>
                </a>
              </div>
            </div>
          </div>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Bar Text Color</p>
            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 px-2 mb-3">
                <a
                  role="button"
                  class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                  [cpPosition]="'top'"
                  [cpPositionRelativeToArrow]="false"
                  (colorPickerSelect)="
                    page.tab.textColor = $event; saveLayout(0)
                  "
                  [cpOutputFormat]="'hex'"
                  [cpOKButton]="true"
                  [cpOKButtonText]="'SET COLOR'"
                  [cpOKButtonClass]="'big-design-alt-button'"
                  [cpSaveClickOutside]="false"
                  [colorPicker]="page.tab.textColor"
                  style="height: 40px"
                >
                  <p
                    class="big-design-input-text my-auto p-0"
                    style="font-size: 14px"
                  >
                    {{ page.tab.textColor }}
                  </p>
                  <div
                    class="rounded-circle border border-secondary"
                    style="height: 20px; aspect-ratio: 1"
                    [style.background-color]="page.tab.textColor"
                  ></div>
                </a>
              </div>
            </div>
          </div>

          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Bar Detail Color</p>
            <div class="px-3 w-100">
              <div class="rounded-pill border w-100 px-2 mb-3">
                <a
                  role="button"
                  class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                  [cpPosition]="'top'"
                  [cpPositionRelativeToArrow]="false"
                  (colorPickerSelect)="
                    page.tab.detailColor = $event; saveLayout(0)
                  "
                  [cpOutputFormat]="'hex'"
                  [cpOKButton]="true"
                  [cpOKButtonText]="'SET COLOR'"
                  [cpOKButtonClass]="'big-design-alt-button'"
                  [cpSaveClickOutside]="false"
                  [colorPicker]="page.tab.detailColor"
                  style="height: 40px"
                >
                  <p
                    class="big-design-input-text my-auto p-0"
                    style="font-size: 14px"
                  >
                    {{ page.tab.detailColor }}
                  </p>
                  <div
                    class="rounded-circle border border-secondary"
                    style="height: 20px; aspect-ratio: 1"
                    [style.background-color]="page.tab.detailColor"
                  ></div>
                </a>
              </div>
            </div>
          </div>

          <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
            <i><span style="font-size: small">Tab Bar</span></i>
          </div>
        </mat-expansion-panel>
      </mat-accordion>

      <div class="px-3 d-flex justify-content-center align-content-center py-4">
        <button
          role="button"
          [disabled]="canDelete"
          (click)="removedPage.emit(pageIndex)"
          class="btn bg-danger rounded-pill text-white fw-bold px-3 py-1 my-auto"
        >
          Delete Page
        </button>
      </div>
    </div>
    <div *ngIf="activeBlock" class="w-100 h-100" style="overflow-y: scroll">
      <mat-expansion-panel class="shadow-0 border-bottom" [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title class="fw-bold text-dark"> General </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="wrap-input1 w-100 pt-3">
          <p class="w-100 mb-4 text">Block Type</p>
          <div class="px-3 w-100">
            <div class="rounded-pill border w-100 pe-4 mb-3">
              <mat-form-field
                class="w-100 text"
                appearance="legacy"
                floatLabel="never"
              >
                <mat-select
                  [ngModel]="activeBlock!.block.type"
                  (ngModelChange)="activeBlock!.block.type = $event; setValue()"
                  class="my-auto d-flex justify-content-start align-items-center"
                >
                  <mat-select-trigger
                    class="text-dark h-100 m-auto"
                    *ngIf="matchingType(activeBlock!.block.type ?? 0)"
                  >
                    <div
                      class="w-100 d-flex justify-content-start align-items-center p-3 my-auto"
                    >
                      <div style="height: 40px"></div>
                      <div class="text-start text-truncate w-50 ms-2">
                        {{ matchingType(activeBlock!.block.type)!.name }}
                      </div>
                    </div>
                  </mat-select-trigger>

                  <mat-option
                    *ngFor="let type of types ?? []"
                    [value]="type.code"
                  >
                    <div
                      class="h-100 w-100 d-flex justify-content-start justify-content-md-between align-items-center py-3"
                    >
                      <div
                        class="d-flex justify-content-start align-items-center"
                      >
                        <span class="py-1" style="font-size: medium">
                          {{ type?.name ?? "Choose a block type" }}
                        </span>
                      </div>
                    </div>
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
          <i><span style="font-size: small">General</span></i>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel class="shadow-0 border-bottom" [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title class="fw-bold text-dark">
            {{ matchingType(activeBlock!.block.type)!.name }}
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div
          class="wrap-input1 w-100 pt-3"
          *ngIf="activeBlock!.block.type == 0"
        >
          <p class="w-100 mb-4 text">Displayed NFTs</p>
          <div class="px-3 w-100 mb-3">
            <app-nft-table
              #nftTable
              [nfts]="activeBlock!.block.nftList.nfts ?? []"
              [count]="(activeBlock!.block.nftList.nfts ?? []).length"
              (clicked)="openNFT($event?.nft, $event?.index)"
              (uploaded)="activeBlock!.block.nftList.nfts = $event; setValue()"
            >
            </app-nft-table>
          </div>
        </div>
        <div
          class="wrap-input1 w-100 pt-3"
          *ngIf="activeBlock!.block.type == 8"
        >
          <p class="w-100 mb-4 text">Displayed Apps</p>
          <div class="px-3 w-100 mb-3">
            <app-app-table
              #appTable
              [apps]="activeBlock!.block.apps"
              [count]="activeBlock!.block.apps.length"
              (clicked)="openApp($event?.app, $event?.index)"
              (uploaded)="activeBlock!.block.apps = $event; setValue()"
            >
            </app-app-table>
          </div>
        </div>
        <ng-container *ngIf="activeBlock!.block.type == 1">
          <div class="wrap-input1 w-100 pt-3">
            <p class="w-100 mb-4 text">Display Images</p>
            <div class="px-3 w-100 mb-3">
              <app-media-table
                #mediaTable
                [id]="walletId"
                [media]="activeBlock.block.imgs"
                [max]="100"
                [count]="activeBlock.block.imgs.length"
                (dataChanged)="setBlockImgData($event); setValue()"
              >
              </app-media-table>
            </div>
          </div>
        </ng-container>

        <ng-container *ngIf="activeBlock!.block.type == 6">
          <div class="wrap-input1 w-100 pt-3 text-center">
            <p class="px-2 mw-100 text-center fw-bold text-secondary">
              NFTs from the user's wallet will be displayed at runtime.
            </p>
          </div>
        </ng-container>

        <ng-container *ngIf="activeBlock!.block.type == 2">
          <div class="wrap-input1 w-100 pt-3 text-center">
            <app-text-editor
              [content]="activeBlock!.block.html"
              (contentChange)="activeBlock!.block.html = $event; setValue()"
            ></app-text-editor>
          </div>
        </ng-container>
        <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
          <i
            ><span style="font-size: small"
              >{{ matchingType(activeBlock.block.type)!.name }}
            </span></i
          >
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel class="shadow-0 border-bottom">
        <mat-expansion-panel-header>
          <mat-panel-title class="fw-bold text-dark">
            Block Margins
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="wrap-input1 w-100 pt-3" *ngFor="let margin of margins">
          <p class="w-100 mb-4 text">Margin {{ margin.id | titlecase }}</p>
          <div class="px-3 w-100">
            <div class="w-100 mb-3">
              <app-layout-slider
                [min]="0"
                [max]="100"
                [value]="activeBlock.block.padding![margin.id]"
                (valueChange)="
                  activeBlock.block.padding![margin.id] = $event; setValue()
                "
              ></app-layout-slider>
            </div>
          </div>
        </div>

        <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
          <i><span style="font-size: small">Block Margins</span></i>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel class="shadow-0 border-bottom">
        <mat-expansion-panel-header>
          <mat-panel-title class="fw-bold text-dark">
            Block Layout
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div class="wrap-input1 w-100 pt-3">
          <p class="w-100 mb-4 text">Style</p>
          <div class="px-3 w-100">
            <div class="rounded-pill border w-100 pe-4 mb-3">
              <mat-form-field
                class="w-100 text"
                appearance="legacy"
                floatLabel="never"
              >
                <mat-select
                  [ngModel]="activeBlock.block.grid!.type"
                  (ngModelChange)="
                    activeBlock.block.grid!.type = $event; setValue()
                  "
                  class="my-auto d-flex justify-content-start align-items-center"
                >
                  <mat-select-trigger
                    class="text-dark h-100 m-auto"
                    *ngIf="activeBlock.block?.grid?.type != undefined"
                  >
                    <div
                      class="w-100 d-flex justify-content-start align-items-center p-3 my-auto"
                    >
                      <div style="height: 40px"></div>
                      <div class="text-start text-truncate w-50 ms-2">
                        {{
                          matchingGridType(activeBlock.block.grid.type)?.name ??
                            "No Layout Selected"
                        }}
                      </div>
                    </div>
                  </mat-select-trigger>

                  <mat-option
                    *ngFor="let g of gridLayoutTypes ?? []"
                    [value]="g.code"
                  >
                    <div
                      class="h-100 w-100 d-flex justify-content-start justify-content-md-between align-items-center py-3"
                    >
                      <div
                        class="d-flex justify-content-start align-items-center"
                      >
                        <span class="py-1" style="font-size: medium">
                          {{ g.name }}
                        </span>
                      </div>
                    </div>
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="wrap-input1 w-100 pt-3">
          <p class="w-100 mb-4 text">
            {{
              activeBlock.block.grid.type == 0
                ? "Item(s) Per. Row"
                : "Visible Items"
            }}
          </p>
          <div class="px-3 w-100">
            <div class="rounded-pill border w-100 pe-4 mb-3">
              <mat-form-field
                class="w-100 text"
                appearance="legacy"
                floatLabel="never"
              >
                <mat-select
                  [ngModel]="activeBlock.block.grid!.rows"
                  (ngModelChange)="
                    activeBlock.block.grid!.rows = $event; setValue()
                  "
                  class="my-auto d-flex justify-content-start align-items-center"
                >
                  <mat-select-trigger
                    class="text-dark h-100 m-auto"
                    *ngIf="activeBlock.block?.grid?.rows ?? 3"
                  >
                    <div
                      class="w-100 d-flex justify-content-start align-items-center p-3 my-auto"
                    >
                      <div style="height: 40px"></div>
                      <div class="text-start text-truncate w-50 ms-2">
                        {{ activeBlock.block.grid.rows }}

                        {{
                          activeBlock.block.grid.type == 0
                            ? "Item(s) Per. Row"
                            : "Visible Items"
                        }}
                      </div>
                    </div>
                  </mat-select-trigger>

                  <mat-option *ngFor="let g of grid ?? []" [value]="g.block">
                    <div
                      class="h-100 w-100 d-flex justify-content-start justify-content-md-between align-items-center py-3"
                    >
                      <div
                        class="d-flex justify-content-start align-items-center"
                      >
                        <span class="py-1" style="font-size: medium">
                          {{ g.name }}
                          {{
                            activeBlock.block.grid.type == 0
                              ? "Item(s) Per. Row"
                              : "Visible Items"
                          }}
                        </span>
                      </div>
                    </div>
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div
          class="wrap-input1 w-100 pt-3"
          *ngIf="activeBlock.block.grid.type == 0"
        >
          <p class="w-100 mb-4 text">Alignment</p>
          <div class="px-3 w-100">
            <div class="rounded-pill border w-100 pe-4 mb-3">
              <mat-form-field
                class="w-100 text"
                appearance="legacy"
                floatLabel="never"
              >
                <mat-select
                  [ngModel]="activeBlock.block.grid!.alignment"
                  (ngModelChange)="
                    activeBlock.block.grid!.alignment = $event; setValue()
                  "
                  class="my-auto d-flex justify-content-start align-items-center"
                >
                  <mat-select-trigger
                    class="text-dark h-100 m-auto"
                    *ngIf="activeBlock.block?.grid?.alignment ?? 'start'"
                  >
                    <div
                      class="w-100 d-flex justify-content-start align-items-center p-3 my-auto"
                    >
                      <div style="height: 40px"></div>
                      <div class="text-start text-truncate w-50 ms-2">
                        {{
                          alignment(activeBlock.block.grid.alignment)?.name ??
                            "Select Alignment"
                        }}
                      </div>
                    </div>
                  </mat-select-trigger>

                  <mat-option
                    *ngFor="let g of gridAlignment ?? []"
                    [value]="g.id"
                  >
                    <div
                      class="h-100 w-100 d-flex justify-content-start justify-content-md-between align-items-center py-3"
                    >
                      <div
                        class="d-flex justify-content-start align-items-center"
                      >
                        <span class="py-1" style="font-size: medium">
                          {{ g.name }}
                        </span>
                      </div>
                    </div>
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="wrap-input1 w-100 pt-3">
          <p class="w-100 mb-4 text">Vertical Spacing</p>
          <div class="px-3 w-100">
            <div class="w-100 mb-3">
              <app-layout-slider
                [min]="0"
                [max]="100"
                [value]="activeBlock.block.grid.margins.vertical"
                (valueChange)="
                  activeBlock.block.grid.margins.vertical = $event; setValue()
                "
              ></app-layout-slider>
            </div>
          </div>
        </div>

        <div class="wrap-input1 w-100 pt-3">
          <p class="w-100 mb-4 text">Horizontal Spacing</p>
          <div class="px-3 w-100">
            <div class="w-100 mb-3">
              <app-layout-slider
                [min]="0"
                [max]="100"
                [value]="activeBlock.block.grid.margins.horizontal"
                (valueChange)="
                  activeBlock.block.grid.margins.horizontal = $event; setValue()
                "
              ></app-layout-slider>
            </div>
          </div>
        </div>

        <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
          <i><span style="font-size: small">Grid Layout</span></i>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel class="shadow-0 border-bottom">
        <mat-expansion-panel-header>
          <mat-panel-title class="fw-bold text-dark">
            Item Borders
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div class="py-4 border-bottom">
          <div class="wrap-input1 w-100">
            <p class="w-100 mb-4 text">Border Radius</p>
            <div class="px-3 w-100">
              <div class="w-100 mb-3">
                <app-layout-slider
                  [min]="0"
                  [max]="100"
                  [value]="activeBlock.block.grid.corners"
                  (valueChange)="
                    activeBlock.block.grid.corners = $event; setValue()
                  "
                ></app-layout-slider>
              </div>
            </div>
          </div>
        </div>
        <ng-container
          *ngFor="let border of gridBorders; index as gridBorderIndex"
        >
          <div
            class="w-100 py-4 border-{{
              gridBorderIndex == gridBorders.length - 1 ? '0' : 'bottom'
            }}"
          >
            <div class="wrap-input1 w-100">
              <p class="w-100 mb-4 text">
                Border {{ border.id | titlecase }} Width
              </p>
              <div class="px-3 w-100">
                <div class="w-100 mb-3">
                  <app-layout-slider
                    [min]="0"
                    [max]="100"
                    [value]="activeBlock.block.grid.borders[border.id].width"
                    (valueChange)="
                      activeBlock.block.grid.borders[border.id].width = $event;
                      setValue()
                    "
                  ></app-layout-slider>
                </div>
              </div>
            </div>

            <div class="wrap-input1 w-100 pt-3">
              <p class="w-100 mb-4 text">
                Border {{ border.id | titlecase }} Color
              </p>
              <div class="px-3 w-100">
                <div class="rounded-pill border w-100 px-2 mb-3">
                  <a
                    role="button"
                    class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                    [cpPosition]="'top'"
                    [cpPositionRelativeToArrow]="false"
                    (colorPickerSelect)="
                      activeBlock.block.grid.borders[border.id].color = $event;
                      setValue()
                    "
                    [cpOutputFormat]="'hex'"
                    [cpAlphaChannel]="'always'"
                    [cpOKButton]="true"
                    [cpOKButtonText]="'SET COLOR'"
                    [cpOKButtonClass]="'big-design-alt-button'"
                    [cpSaveClickOutside]="false"
                    [colorPicker]="
                      activeBlock.block.grid.borders[border.id].color
                    "
                    style="height: 40px"
                  >
                    <p
                      class="big-design-input-text my-auto p-0"
                      style="font-size: 14px"
                    >
                      {{ activeBlock.block.grid.borders[border.id].color }}
                    </p>
                    <div
                      class="rounded-circle border border-secondary"
                      style="height: 20px; aspect-ratio: 1"
                      [style.background-color]="
                        activeBlock.block.grid.borders[border.id].color
                      "
                    ></div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
          <i><span style="font-size: small">Item Borders</span></i>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel class="shadow-0 border-bottom">
        <mat-expansion-panel-header>
          <mat-panel-title class="fw-bold text-dark">
            Block Shadow
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="wrap-input1 w-100 py-4 border-bottom">
          <p class="w-100 mb-4 text">Shadow Color</p>
          <div class="px-3 w-100">
            <div class="rounded-pill border w-100 px-2 mb-3">
              <a
                role="button"
                class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                [cpPosition]="'top'"
                [cpPositionRelativeToArrow]="false"
                (colorPickerSelect)="
                  activeBlock.block.shadow.color = $event; setValue()
                "
                [cpOutputFormat]="'hex'"
                [cpAlphaChannel]="'always'"
                [cpOKButton]="true"
                [cpOKButtonText]="'SET COLOR'"
                [cpOKButtonClass]="'big-design-alt-button'"
                [cpSaveClickOutside]="false"
                [colorPicker]="activeBlock.block.shadow.color"
                style="height: 40px"
              >
                <p
                  class="big-design-input-text my-auto p-0"
                  style="font-size: 14px"
                >
                  {{ activeBlock.block.shadow.color }}
                </p>
                <div
                  class="rounded-circle border border-secondary"
                  style="height: 20px; aspect-ratio: 1"
                  [style.background-color]="activeBlock.block.shadow.color"
                ></div>
              </a>
            </div>
          </div>
        </div>
        <div class="wrap-input1 w-100 py-4 border-bottom">
          <p class="w-100 mb-4 text">Shadow Blur</p>
          <div class="px-3 w-100">
            <div class="w-100 mb-3">
              <app-layout-slider
                [min]="0"
                [max]="100"
                [value]="activeBlock.block.shadow.blur"
                (valueChange)="
                  activeBlock.block.shadow.blur = $event; setValue()
                "
              ></app-layout-slider>
            </div>
          </div>
        </div>
        <ng-container
          *ngFor="let shadow of blockShadowDirection; index as blockShadowIndex"
        >
          <div
            class="w-100 py-4 border-{{
              blockShadowIndex == blockShadowDirection.length - 1
                ? '0'
                : 'bottom'
            }}"
          >
            <div class="wrap-input1 w-100">
              <p class="w-100 mb-4 text">
                {{ shadow.id | titlecase }} Position
              </p>
              <div class="px-3 w-100">
                <div class="w-100 mb-3">
                  <app-layout-slider
                    [min]="0"
                    [max]="100"
                    [value]="activeBlock.block.shadow.direction[shadow.id]"
                    (valueChange)="
                      activeBlock.block.shadow.blur = $event; setValue()
                    "
                  ></app-layout-slider>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
          <i><span style="font-size: small">Block Shadow</span></i>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel class="shadow-0 border-bottom">
        <mat-expansion-panel-header>
          <mat-panel-title class="fw-bold text-dark">
            Item Shadow
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="wrap-input1 w-100 py-4 border-bottom">
          <p class="w-100 mb-4 text">Shadow Color</p>
          <div class="px-3 w-100">
            <div class="rounded-pill border w-100 px-2 mb-3">
              <a
                role="button"
                class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                [cpPosition]="'top'"
                [cpPositionRelativeToArrow]="false"
                (colorPickerSelect)="
                  activeBlock.block.grid.shadow.color = $event; setValue()
                "
                [cpOutputFormat]="'hex'"
                [cpAlphaChannel]="'always'"
                [cpOKButton]="true"
                [cpOKButtonText]="'SET COLOR'"
                [cpOKButtonClass]="'big-design-alt-button'"
                [cpSaveClickOutside]="false"
                [colorPicker]="activeBlock.block.grid.shadow.color"
                style="height: 40px"
              >
                <p
                  class="big-design-input-text my-auto p-0"
                  style="font-size: 14px"
                >
                  {{ activeBlock.block.grid.shadow.color }}
                </p>
                <div
                  class="rounded-circle border border-secondary"
                  style="height: 20px; aspect-ratio: 1"
                  [style.background-color]="activeBlock.block.grid.shadow.color"
                ></div>
              </a>
            </div>
          </div>
        </div>
        <div class="wrap-input1 w-100 py-4 border-bottom">
          <p class="w-100 mb-4 text">Shadow Blur</p>
          <div class="px-3 w-100">
            <div class="w-100 mb-3">
              <app-layout-slider
                [min]="0"
                [max]="100"
                [value]="activeBlock.block.grid.shadow.blur"
                (valueChange)="
                  activeBlock.block.grid.shadow.blur = $event; setValue()
                "
              ></app-layout-slider>
            </div>
          </div>
        </div>
        <ng-container
          *ngFor="let shadow of gridShadowDirection; index as gridShadowIndex"
        >
          <div
            class="w-100 py-4 border-{{
              gridShadowIndex == gridShadowDirection.length - 1 ? '0' : 'bottom'
            }}"
          >
            <div class="wrap-input1 w-100">
              <p class="w-100 mb-4 text">
                {{ shadow.id | titlecase }} Position
              </p>
              <div class="px-3 w-100">
                <div class="w-100 mb-3">
                  <app-layout-slider
                    [min]="0"
                    [max]="100"
                    [value]="activeBlock.block.grid.shadow.direction[shadow.id]"
                    (valueChange)="
                      activeBlock.block.grid.shadow.direction[shadow.id] =
                        $event;
                      setValue()
                    "
                  ></app-layout-slider>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
        <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
          <i><span style="font-size: small"> Item Shadow</span></i>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel class="shadow-0 border-bottom">
        <mat-expansion-panel-header>
          <mat-panel-title class="fw-bold text-dark">
            Block Borders
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div class="w-100 py-4 border-bottom">
          <div class="wrap-input1 w-100">
            <p class="w-100 mb-4 text">Border Radius</p>
            <div class="px-3 w-100">
              <div class="w-100 mb-3">
                <app-layout-slider
                  [min]="0"
                  [max]="100"
                  [value]="activeBlock!.block.corners"
                  (valueChange)="
                    activeBlock!.block.corners = $event; setValue()
                  "
                ></app-layout-slider>
              </div>
            </div>
          </div>
        </div>

        <ng-container *ngFor="let border of borders; index as blockBorderIndex">
          <div
            class="w-100 py-4 border-{{
              blockBorderIndex == borders.length - 1 ? '0' : 'bottom'
            }}"
          >
            <div class="wrap-input1 w-100">
              <p class="w-100 mb-4 text">
                Border {{ border.id | titlecase }} Width
              </p>
              <div class="px-3 w-100">
                <div class="w-100 mb-3">
                  <app-layout-slider
                    [min]="0"
                    [max]="100"
                    [value]="activeBlock.block.borders[border.id].width"
                    (valueChange)="
                      activeBlock.block.borders[border.id].width = $event;
                      setValue()
                    "
                  ></app-layout-slider>
                </div>
              </div>
            </div>

            <div class="wrap-input1 w-100 pt-3">
              <p class="w-100 mb-4 text">
                Border {{ border.id | titlecase }} Color
              </p>
              <div class="px-3 w-100">
                <div class="rounded-pill border w-100 px-2 mb-3">
                  <a
                    role="button"
                    class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                    [cpPosition]="'top'"
                    [cpPositionRelativeToArrow]="false"
                    (colorPickerSelect)="
                      activeBlock.block.borders[border.id].color = $event;
                      setValue()
                    "
                    [cpOutputFormat]="'hex'"
                    [cpAlphaChannel]="'always'"
                    [cpOKButton]="true"
                    [cpOKButtonText]="'SET COLOR'"
                    [cpOKButtonClass]="'big-design-alt-button'"
                    [cpSaveClickOutside]="false"
                    [colorPicker]="activeBlock.block.borders[border.id].color"
                    style="height: 40px"
                  >
                    <p
                      class="big-design-input-text my-auto p-0"
                      style="font-size: 14px"
                    >
                      {{ activeBlock.block.borders[border.id].color }}
                    </p>
                    <div
                      class="rounded-circle border border-secondary"
                      style="height: 20px; aspect-ratio: 1"
                      [style.background-color]="
                        activeBlock.block.borders[border.id].color
                      "
                    ></div>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </ng-container>

        <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
          <i><span style="font-size: small">Block Borders</span></i>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel class="shadow-0 border-bottom" [expanded]="false">
        <mat-expansion-panel-header>
          <mat-panel-title class="fw-bold text-dark">
            Block Colours
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div class="wrap-input1 w-100 pt-3">
          <p class="w-100 mb-4 text">Background Color</p>
          <div class="px-3 w-100">
            <div class="rounded-pill border w-100 px-2 mb-3">
              <a
                role="button"
                class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                [cpPosition]="'top'"
                [cpPositionRelativeToArrow]="false"
                (colorPickerSelect)="
                  activeBlock!.block.backgroundColor = $event; setValue()
                "
                [cpOutputFormat]="'hex'"
                [cpAlphaChannel]="'always'"
                [cpOKButton]="true"
                [cpOKButtonText]="'SET COLOR'"
                [cpOKButtonClass]="'big-design-alt-button'"
                [cpSaveClickOutside]="false"
                [colorPicker]="
                  activeBlock!.block.backgroundColor &&
                  activeBlock!.block.backgroundColor != ''
                    ? activeBlock!.block.backgroundColor
                    : page.backgroundColor
                "
                style="height: 40px"
              >
                <p
                  class="big-design-input-text my-auto p-0"
                  style="font-size: 14px"
                >
                  {{
                    activeBlock!.block.backgroundColor &&
                    activeBlock!.block.backgroundColor != ""
                      ? activeBlock!.block.backgroundColor
                      : page.backgroundColor
                  }}
                </p>
                <div
                  class="rounded-circle border border-secondary"
                  style="height: 20px; aspect-ratio: 1"
                  [style.background-color]="
                    activeBlock!.block.backgroundColor &&
                    activeBlock!.block.backgroundColor != ''
                      ? activeBlock!.block.backgroundColor
                      : page.backgroundColor
                  "
                ></div>
              </a>
            </div>
          </div>
        </div>

        <div class="wrap-input1 w-100 pt-3">
          <p class="w-100 mb-4 text">Text Color</p>
          <div class="px-3 w-100">
            <div class="rounded-pill border w-100 px-2 mb-3">
              <a
                role="button"
                class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                [cpPosition]="'top'"
                [cpPositionRelativeToArrow]="false"
                (colorPickerSelect)="
                  activeBlock!.block.textColor = $event; setValue()
                "
                [cpOutputFormat]="'hex'"
                [cpOKButton]="true"
                [cpOKButtonText]="'SET COLOR'"
                [cpOKButtonClass]="'big-design-alt-button'"
                [cpSaveClickOutside]="false"
                [colorPicker]="
                  activeBlock!.block.textColor &&
                  activeBlock!.block.textColor != ''
                    ? activeBlock!.block.textColor
                    : page.textColor
                "
                style="height: 40px"
              >
                <p
                  class="big-design-input-text my-auto p-0"
                  style="font-size: 14px"
                >
                  {{
                    activeBlock!.block.textColor &&
                    activeBlock!.block.textColor != ""
                      ? activeBlock!.block.textColor
                      : page.textColor
                  }}
                </p>
                <div
                  class="rounded-circle border border-secondary"
                  style="height: 20px; aspect-ratio: 1"
                  [style.background-color]="
                    activeBlock!.block.textColor &&
                    activeBlock!.block.textColor != ''
                      ? activeBlock!.block.textColor
                      : page.textColor
                  "
                ></div>
              </a>
            </div>
          </div>
        </div>

        <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
          <i><span style="font-size: small">Block Colours</span></i>
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel class="shadow-0 border-bottom" [expanded]="false">
        <mat-expansion-panel-header>
          <mat-panel-title class="fw-bold text-dark">
            Item Colours
          </mat-panel-title>
        </mat-expansion-panel-header>

        <div class="wrap-input1 w-100 pt-3">
          <p class="w-100 mb-4 text">Background Color</p>
          <div class="px-3 w-100">
            <div class="rounded-pill border w-100 px-2 mb-3">
              <a
                role="button"
                class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                [cpPosition]="'top'"
                [cpPositionRelativeToArrow]="false"
                (colorPickerSelect)="
                  activeBlock!.block.grid.backgroundColor = $event; setValue()
                "
                [cpOutputFormat]="'hex'"
                [cpAlphaChannel]="'always'"
                [cpOKButton]="true"
                [cpOKButtonText]="'SET COLOR'"
                [cpOKButtonClass]="'big-design-alt-button'"
                [cpSaveClickOutside]="false"
                [colorPicker]="
                  activeBlock!.block.grid.backgroundColor &&
                  activeBlock!.block.grid.backgroundColor != ''
                    ? activeBlock!.block.grid.backgroundColor
                    : activeBlock!.block.backgroundColor
                "
                style="height: 40px"
              >
                <p
                  class="big-design-input-text my-auto p-0"
                  style="font-size: 14px"
                >
                  {{
                    activeBlock!.block.grid.backgroundColor &&
                    activeBlock!.block.grid.backgroundColor != ""
                      ? activeBlock!.block.grid.backgroundColor
                      : activeBlock!.block.backgroundColor
                  }}
                </p>
                <div
                  class="rounded-circle border border-secondary"
                  style="height: 20px; aspect-ratio: 1"
                  [style.background-color]="
                    activeBlock!.block.grid.backgroundColor &&
                    activeBlock!.block.grid.backgroundColor != ''
                      ? activeBlock!.block.grid.backgroundColor
                      : activeBlock!.block.backgroundColor
                  "
                ></div>
              </a>
            </div>
          </div>
        </div>

        <div class="wrap-input1 w-100 pt-3">
          <p class="w-100 mb-4 text">Text Color</p>
          <div class="px-3 w-100">
            <div class="rounded-pill border w-100 px-2 mb-3">
              <a
                role="button"
                class="btn btn-transparent shadow-0 d-flex justify-content-between align-items-center"
                [cpPosition]="'top'"
                [cpPositionRelativeToArrow]="false"
                (colorPickerSelect)="
                  activeBlock!.block.grid.textColor = $event; setValue()
                "
                [cpOutputFormat]="'hex'"
                [cpOKButton]="true"
                [cpOKButtonText]="'SET COLOR'"
                [cpOKButtonClass]="'big-design-alt-button'"
                [cpSaveClickOutside]="false"
                [colorPicker]="
                  activeBlock!.block.grid.textColor &&
                  activeBlock!.block.grid.textColor != ''
                    ? activeBlock!.block.grid.textColor
                    : activeBlock!.block.textColor
                "
                style="height: 40px"
              >
                <p
                  class="big-design-input-text my-auto p-0"
                  style="font-size: 14px"
                >
                  {{
                    activeBlock!.block.grid.textColor &&
                    activeBlock!.block.grid.textColor != ""
                      ? activeBlock!.block.grid.textColor
                      : activeBlock!.block.textColor
                  }}
                </p>
                <div
                  class="rounded-circle border border-secondary"
                  style="height: 20px; aspect-ratio: 1"
                  [style.background-color]="
                    activeBlock!.block.grid.textColor &&
                    activeBlock!.block.grid.textColor != ''
                      ? activeBlock!.block.grid.textColor
                      : activeBlock!.block.textColor
                  "
                ></div>
              </a>
            </div>
          </div>
        </div>

        <div class="w-100 pt-3 pb-0 text-purple text-center fw-bold">
          <i><span style="font-size: small">Item Colours</span></i>
        </div>
      </mat-expansion-panel>

      <div class="px-3 d-flex justify-content-center align-content-center py-4">
        <button
          role="button"
          (click)="finishedEditing(1)"
          class="btn bg-danger rounded-pill text-white fw-bold px-3 py-1 my-auto"
        >
          Delete Block
        </button>
      </div>
    </div>
  </div>
</div>
