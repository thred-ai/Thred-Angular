<div class="p-0 h-100 w-100 my-3">
  <div class="w-100 h-100 pt-5" *ngIf="loading">
    <div
      class="d-flex flex-column justify-content-center align-items-center w-100 p-2"
    >
      <h3 class="w-100 fw-bold mb-4 text-center" style="font-size: 20px">
        Loading Apps
      </h3>
      <div
        class="shadow bg-white rounded-circle lds-dual-ring bg-danger m-0"
      ></div>
    </div>
  </div>
  <div
    class="w-100 h-100 d-flex justify-content-between flex-column"
    *ngIf="!loading"
  >
    <div class="w-100 p-2" *ngIf="mode == 0">
      <h3 class="w-100 fw-bold mb-4" style="font-size: 20px">
        Select a wallet
      </h3>
      <div class="rounded-15 w-100 border" style="overflow: hidden">
        <app-wallet-connect-component
          [providers]="['metamask', 'wallet-connect']"
          (selected)="complete($event)"
        >
        </app-wallet-connect-component>
      </div>
    </div>
    <div class="w-100 p-2" *ngIf="mode == 1">
      <h3 class="w-100 fw-bold mb-4" style="font-size: 20px">Network</h3>
      <div class="rounded-pill border w-100 pb-2 px-4 mb-4">
        <mat-form-field class="w-100" appearance="legacy" floatLabel="never">
          <mat-select
            [(ngModel)]="chainId"
            (selectionChange)="changed($event)"
            class="my-auto"
            panelClass="rounded-panel"
          >
            <mat-select-trigger class="text-dark">
              <div
                class="w-100 d-flex justify-content-start align-items-center"
                style="height: 22.5px"
              >
                <img
                  id="image"
                  *ngIf="chainId?.url"
                  class="me-2 h-100"
                  [src]="chainId.url"
                  style="object-fit: cover; aspect-ratio: 1"
                />
                <span class="py-1" style="font-size: medium">
                  {{ chainId.name }}
                </span>
              </div>
            </mat-select-trigger>

            <mat-option *ngFor="let chain of chains ?? []" [value]="chain">
              <div
                class="w-100 d-flex justify-content-start align-items-center"
                style="height: 22.5px"
              >
                <img
                  id="image"
                  *ngIf="chain?.url"
                  class="me-2 h-100"
                  [src]="chain?.url"
                  style="object-fit: cover; aspect-ratio: 1"
                />
                <span class="py-1" style="font-size: medium">
                  {{ chain?.name ?? "No Network Selected" }}
                </span>
              </div>
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <h3 class="w-100 fw-bold mb-4" style="font-size: 20px">
        {{ (apps?.length ?? 0) > 0 ? "My Apps" : "No Apps" }}
      </h3>
      <div
        class="w-100 row row-cols-3 row-cols-md-4 justify-content-start gx-1"
      >
        <div
          class="col p-2 text-center"
          style="aspect-ratio: 1"
          *ngFor="let app of apps ?? []"
        >
          <div
            class="w-100 h-100 bg-white rounded-icon shadow d-flex justify-content-center align-items-center app-icon mb-2"
            style="object-fit: contain; overflow: hidden"
            role="button"
            (click)="open(app)"
          >
            <img
              class="m-auto"
              style="object-fit: contain; height: 90%; width: 90%"
              [src]="app.displayUrls[0]"
            />
          </div>
          <p
            class="text-center mt-2 text-truncate w-100"
            style="font-size: small"
          >
            {{ app.name }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>
